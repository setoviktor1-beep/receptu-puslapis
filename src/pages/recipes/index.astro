---
import Layout from '../../layouts/Layout.astro';
import { getCollection } from 'astro:content';

const recipes = (await getCollection('recipes')).sort(
	(a, b) => b.data.date.valueOf() - a.data.date.valueOf()
);
---

<Layout title="Visi Receptai | Receptų Blogas">
	<h1>Visi Receptai</h1>
	<ul class="recipe-grid">
		{
			recipes.map((recipe) => (
				<li class="recipe-card">
					<a href={`/recipes/${recipe.slug}`}>
            {/* We will handle images properly in components later, but for now simple img */}
						<img src={recipe.data.image} alt={recipe.data.title} onerror="this.src='/favicon.svg'" />
						<div class="content">
              <span class="category">{recipe.data.category}</span>
              <h2>{recipe.data.title}</h2>
              <div class="meta">
                <time datetime={recipe.data.date.toISOString()}>
                  {recipe.data.date.toLocaleDateString('lt-LT')}
                </time>
                <span>•</span>
                <span>{recipe.data.time_minutes} min.</span>
              </div>
            </div>
					</a>
				</li>
			))
		}
	</ul>
</Layout>

<style>
  h1 {
    text-align: center;
    margin-bottom: 2rem;
  }
	.recipe-grid {
		display: grid;
		grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
		gap: 2rem;
		padding: 0;
    list-style: none;
	}
  .recipe-card {
    background: #fff;
    border: 1px solid #eee;
    border-radius: 8px;
    overflow: hidden;
    transition: transform 0.2s, box-shadow 0.2s;
  }
  .recipe-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
  }
  .recipe-card a {
    text-decoration: none;
    color: inherit;
    display: block;
  }
  .recipe-card img {
    width: 100%;
    height: 200px;
    object-fit: cover;
    background: #f0f0f0;
  }
  .content {
    padding: 1rem;
  }
  .category {
    font-size: 0.8rem;
    text-transform: uppercase;
    color: #666;
    letter-spacing: 1px;
    font-weight: bold;
  }
  h2 {
    margin: 0.5rem 0;
    font-size: 1.2rem;
  }
  .meta {
    font-size: 0.9rem;
    color: #888;
    display: flex;
    gap: 0.5rem;
  }
</style>
